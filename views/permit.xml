<odoo>
    <data>

         <!-- ==================================================  sd_payaneh_nafti.permit ====================-->

        <record model="ir.ui.view" id="sd_payaneh_nafti_permit_list">
            <field name="name">sd_payaneh_nafti List</field>
            <field name="model">sd_payaneh_nafti.permit</field>
            <field name="arch" type="xml">
                <tree editable="bottom" delete="1" >
                    <field name="old_record" invisible="1"/>
                    <field name="over_due" invisible="1"/>
                    <field name="permit_no" />
                    <field name="record_date"
                           decoration-info="old_record"
                           decoration-bf="old_record" />
                    <field name="due_date"
                           decoration-danger="over_due == 1"
                           decoration-warning="over_due == 2"
                           decoration-bf="over_due != 0"
                    />
                    <field name="record_type" />
                    <field name="project" options='{"no_open": True, "no_create": True}'/>
                    <field name="contractor" options='{"no_open": True, "no_create": True}'/>
                    <field name="assignee" options='{"no_open": True, "no_create": True}'/>
                    <field name="permit_state"
                       decoration-danger="permit_state == 'open'"
                       decoration-bf="permit_state == 'open'"
                    />
                </tree>
            </field>
        </record>

        <!-- ==================================================  sd_payaneh_nafti.anomaly.types ====================-->

        <record model="ir.ui.view" id="sd_payaneh_nafti_permit_types_list">
            <field name="name">sd_payaneh_nafti List</field>
            <field name="model">sd_payaneh_nafti.permit.types</field>
            <field name="arch" type="xml">
                <tree editable="bottom">
                    <field name="sequence" widget="handle" />
                    <field name="name" />

                </tree>
            </field>
        </record>
        <!-- ==================================================  Search ====================-->

        <record model="ir.ui.view" id="sd_payaneh_nafti_permit_list_search">
            <field name="name">sd_payaneh_nafti</field>
            <field name="model">sd_payaneh_nafti.permit</field>
            <field name="arch" type="xml">
                <search string="Dealers">
                    <field name="permit_no"/>
                    <field name="project"/>
                    <field name="contractor"/>
                    <field name="record_type"/>
                    <field name="permit_state"/>
                    <filter string="Open" name="open_permit"
                            domain="[('permit_state', '=', 'open')]"/>
                    <group>
                        <filter name="group_project" string="Project" context="{'group_by': 'project'}"/>
                        <filter name="group_contractor" string="Contractor" context="{'group_by': 'contractor'}"/>
                        <filter name="group_record_type" string="Type" context="{'group_by': 'record_type'}"/>
                        <filter name="group_permit_state" string="Close/Open" context="{'group_by': 'permit_state'}"/>
                    </group>
                </search>
            </field>
        </record>


        <!-- ==================================================  Action Window ====================-->

        <record model="ir.actions.act_window" id="action_window_permit">
            <field name="name">Permit</field>
            <field name="res_model">sd_payaneh_nafti.permit</field>
            <field name="view_mode">tree</field>
            <field name="domain">['|',
                                    ('project.payaneh_managers_users', 'in', uid),
                                    ('project.payaneh_officers_users', 'in', uid)]
            </field>
            <field name="context">{'search_default_open_permit': 1}</field>

        </record>

        <record model="ir.actions.act_window" id="action_window_permit_types">
            <field name="name">Permit Types</field>
            <field name="res_model">sd_payaneh_nafti.permit.types</field>
            <field name="view_mode">tree</field>
        </record>

        <!-- ==================================================  Menu ====================-->

        <menuitem name="Permit"
                  id="sd_payaneh_nafti.permit_menu"
                  parent="sd_payaneh_nafti.process_menu"
                  action="action_window_permit"/>

        <menuitem name="Permit"
                  id="sd_payaneh_nafti.permit_setting_menu"
                  parent="sd_payaneh_nafti.settings_menu"/>

        <menuitem name="Permit Types"
                  id="sd_payaneh_nafti.permit_types_menu"
                  parent="sd_payaneh_nafti.permit_setting_menu"
                  action="action_window_permit_types"/>
    </data>
</odoo>
