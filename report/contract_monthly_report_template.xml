<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="contract_monthly_report_page_header">
            <div class="text-center">
                <div style="display:block; position:absolute;padding:0; margin:0px; padding-top:10px; padding-bottom:10px; text-align:center;">
                    <img t-att-src="'/report/barcode/Code128/'+header['contract_no']" style="width:250px;height:25px" t-att-alt="header['contract_no']"/>
                </div>
                <div>
                    <img alt="Logo" t-att-src="'/logo?company=1'" t-att-alt="''"
                         style=" height: 50px;" height="50"/>
                </div>

                <div>شرکت ملی نفت ایران</div>
                <div>شرکت پایانه های نفتی ایران</div>
                <div>تاسیسات بارگیری زمینی میعانات گازی پارس جنوبی</div>
                <div class="h4 mt-2 mb-4">گزارش بارگیری پایان قرارداد نفتکش های زمینی میعانات گازی</div>
            </div>
            <div class="row mx-0 mb-4 border border-info rounded ">
                <div class="col-9 mx-0 ">
                    <div class="row border-bottom mx-0 py-1 ">
                        <div class="col-3 mx-0">
                            <span>شماره قرارداد:</span>
                        </div>
                        <div class="col-2 mx-0">
                            <span class="font-weight-bold" t-esc="header['contract_no']"></span>
                        </div>
                        <div class="col mx-0">
                            <span>مقدار مجوز</span>

                            <span>(</span>
                            <span t-esc="header['unit']"></span>
                            <span>):</span>
                        </div>
                        <div class="col-2 mx-0">
                            <span class="font-weight-bold" t-esc="header['amount']"></span>
                        </div>
                    </div>
                    <div class="row border-bottom mx-0 py-1">
                        <div class="col-2 mx-0">نام خریدار:</div>
                        <div class="col-10 mx-0 font-weight-bold">
                            <div class="row mx-0">
                                <div class="mx-1" t-esc="header['buyer']"></div>
                                <div class="mx-2" t-esc="header['destination']"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row mx-0 py-1">
                        <div class="col-2 mx-0">پیمانکار حمل:</div>
                        <div class="col-10 mx-0 font-weight-bold">
                            <span t-esc="header['contractors']"></span>
                        </div>
                    </div>

                </div>
                <div class="col-3 text-center">
                    <div class=" py-1">دوره برداشت</div>
                    <div class="font-weight-bold py-1" t-esc="dates[0]"></div>
                    <div class="font-weight-bold py-1" t-esc="dates[1]"></div>
                </div>
            </div>

        </template>

        <template id="contract_monthly_report_table_header">
            <tr style="direction:ltr;">
                <th>ROW</th>
                <th>DATE</th>
                <th>SP.GR.</th>
                <th>G.S.V. (LITER)</th>
                <th>G.S.V. (BBLS)</th>
                <th>M.T.</th>
                <th>Tanker no.</th>
            </tr>
        </template>

        <template id="contract_monthly_report_table_body">
            <tr>
                <t t-foreach="row_data_line" t-as="row_data">
                    <td t-esc="row_data"></td>
                </t>
            </tr>
        </template>

        <template id="contract_monthly_report_table_footer">
            <tr>
                <td colspan="3">جمع قرارداد در ماه جاری</td>
                <td t-esc="'%.d' % footer_data['total_gsv_l']"></td>
                <td t-esc="'%.2f' % footer_data['total_gsv_b']"></td>
                <td t-esc="'%.3f' % footer_data['total_mt']"></td>
                <td t-esc="footer_data['total_tankers']"></td>
            </tr>
            <tr>
                <td colspan="3">جمع قرارداد از ماه قبل</td>
                <td t-esc="'%.d' % footer_data['total_gsv_l_past']"></td>
                <td t-esc="'%.2f' % footer_data['total_gsv_b_past']"></td>
                <td t-esc="'%.3f' % footer_data['total_mt_past']"></td>
                <td t-esc="footer_data['total_tankers_past']"></td>
            </tr>
            <tr>
                <td colspan="3">جمع کل قرارداد</td>
                <td t-esc="'%.d' % footer_data['total_gsv_l_all']"></td>
                <td t-esc="'%.2f' % footer_data['total_gsv_b_all']"></td>
                <td t-esc="'%.3f' % footer_data['total_mt_all']"></td>
                <td t-esc="footer_data['total_tankers_all']"></td>
            </tr>
        </template>

        <template id="contract_monthly_report_signs">
            <div class="row my-5 text-center">
                <div class="col-4">پایانه میعانات گازی پارس جنوبی</div>
                <div class="col-4">اداره نظارت بر صادرات، واردات و مبادلات مواد نفتي</div>
                <div class="col-4">نماينده خريدار</div>
            </div>

        </template>

        <template id="contract_monthly_report_data">
            <div class="page">
                <div class="container " style="font-size: .9rem">
                    <div class="container mt-2">
<!--                        <div class="container iransans_font">-->
<!--                            <div style="direction:rtl">-->
                                <t t-call="sd_payaneh_nafti.contract_monthly_report_page_header" t-lang="lang"/>
                                <table class="table table-bordered border-0 text-center monthly_report_table">
                                        <thead class=" text-center">
                                            <t t-call="sd_payaneh_nafti.contract_monthly_report_table_header" t-lang="lang"/>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="row_data_lines" t-as="row_data_line">
                                                <t t-call="sd_payaneh_nafti.contract_monthly_report_table_body"/>
                                            </t>
                                        </tbody>
                                        <tfoot>
                                            <t t-call="sd_payaneh_nafti.contract_monthly_report_table_footer" t-lang="lang"/>
                                        </tfoot>
                                    </table>
                                <t t-call="sd_payaneh_nafti.contract_monthly_report_signs" t-lang="lang"/>
<!--                            </div>-->
<!--                        </div>-->
                    </div>
                    <div class="mb-5"></div>
                    <div class="mb-5"></div>
                </div>
            </div>
        </template>

        <template id="contract_monthly_report_template">
            <t t-if="loading_type == 'internal'" t-call="web.basic_layout" t-lang="fa_IR">
                <div t-if="errors != []">
                    <div class="container mt-2 text-center">
                        <div class="border border-danger rounded p-3" style="direction: ltr" t-esc="errors[0]"></div>
                    </div>
                </div>
                <div t-if="errors == []">
                    <t t-foreach="docs" t-as="o">
                         <t  t-call="sd_payaneh_nafti.contract_monthly_report_data"  t-lang="fa_IR"/>
                    </t>
                </div>
            </t>

            <t t-if="loading_type == 'export'" t-call="web.basic_layout" lang="en_US">
                <div t-if="errors != []">
                    <div class="container mt-2 text-center">
                        <div class="border border-danger rounded p-3" style="direction: ltr" t-esc="errors[0]"></div>
                    </div>
                </div>
                <div t-if="errors == []">
                    <t t-foreach="docs" t-as="o">
                        <t t-call="sd_payaneh_nafti.contract_monthly_report_data_export" t-lang="en_US"/>
                    </t>
                </div>
            </t>

        </template>

    </data>
</odoo>
